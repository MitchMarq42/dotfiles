#!/bin/bash

# Excellent info at https://wiki.ubuntu.com/X/InputCoordinateTransformation

[[ $@ == "" ]] && echo "no operation specified" && exit 0

direction=$@

touchpad=$(
    xinput list |
    grep TouchPad |
    sed 's/^.*id=//' |
    awk '{print $1}'
)
prop=$(
    xinput list-props $touchpad |
    grep Matrix |
    sed 's/^.*(//;s/).*$//'
)

[[ $direction == normal ]] &&
    export matrix="1 0 0 0 1 0 0 0 1"

[[ $direction == left ]] &&
    export matrix="0 -1 1 1 0 0 0 0 1"

[[ $direction == right ]] &&
    export matrix="0 1 0 -1 0 1 0 0 1"

[[ $direction == inverted ]] &&
    export matrix="-1 0 1 0 -1 1 0 0 1"

xinput set-prop $touchpad $prop $matrix
xrandr -o $direction
