#!/usr/bin/env sh

# Launch emacsclient or emacs, with better argument handling?

# Intended behavior:
# $ runemacs
#   (new emacs frame with default dashboard/scratch)
# $ runemacs file.txt
#   (file opens in new windowed window)
# $ runemacs -fs file.txt
#   (file opens in full screen)
# $ runemacs -nw file.txt
#   (file opens in current terminal)

emacs=$(which emacs)

allargs="$@"
newargs=""
for oldarg in $allargs
do
    case oldarg in
	"-fs")
	    newargs="$newargs -fs";;
	"-nw")
	    newargs="$newargs -nw";;
	*)
	    newargs="$newargs";;
    esac
    
done

$emacs $newargs

# emacs() {
#     if [[ $# -eq 0 ]]; then
# 	/usr/bin/emacs # "emacs" is function, will cause recursion
# 	return
#     fi
#     args=($*)
#     for ((i=0; i <= ${#args}; i++)); do
# 	local a=${args[i]}
# 	# NOTE: -c for creating new frame
# 	if [[ ${a:0:1} == '-' && ${a} != '-c' && ${a} != '--' ]]; then
# 	    /usr/bin/emacs ${args[*]}
# 	    return
# 	fi
#     done
#     setsid emacsclient -n -a /usr/bin/emacs ${args[*]}
# }
